<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css2?family=Tsukimi+Rounded:wght@600&display=swap" rel="stylesheet">
    <title>Tic-Tac-Toe Bolt - Two Players</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Tsukimi Rounded", sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            overflow: hidden;
            font-weight: 600;
            font-style: normal;
            align-items: center;
            background: #09403A;
        }
        
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4.5rem;
            background: rgba(10, 10, 10, 0.2);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            padding: 1rem;
            text-align: center;
            justify-content: space-around;
            margin-bottom: 10%;
            color: #ffffff;
            border-bottom: 1px solid #FFFFFF1F;
            z-index: 51;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 600;
        }

        .wrapper {
            position: absolute;
            transform: translate(-50%, -50%);
            top: 50%;
            left: 50%;
        }

        .container {
            width: 58vmin;
            height: 58vmin;
            display: flex;
            flex-wrap: wrap;
            gap: 2vmin;
        }
        
        .button-option {
            background: #14574869;
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(3px);
            box-shadow: 4px 7px 6px #000000B8 inset;
            height: 18vmin;
            width: 18vmin;
            border: 2px solid;
            border-color: #FFFFFF69;
            border-radius: 8px;
            font-size: 6vmin;
            cursor: pointer;
            transition: background 0.2s;
        }

        .button-option.x {
            font-family: "Tsukimi Rounded", sans-serif;
            font-weight: 600;
            font-style: normal;
            color: #f44336 ; /* red for X */
        }

        .button-option.o {
            font-family: "Tsukimi Rounded", sans-serif;
            font-weight: 600;
            font-style: normal;
            color: #F4FB6E; /* yellow for O */
        }

        .button-option:hover:not(:disabled) {
            background: #2F2F2F;
        }

        .button-option:disabled {
            cursor: not-allowed;
        }

        #restart {
            position: relative;
            display: block;
            margin: 1.5em auto 0 auto;
            font-size: 1.2em;
            padding: 0.4em;
            background: #155C4E3B;
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(3px);
            box-shadow: 1px 4px 6px #FFFFFF73;
            color: #ffffff;
            border: 2px solid;
            border-color: #FFF;
            border-radius: 1em;
            cursor: pointer;
            transition: background 0.2s;
        }

        #restart:hover {
            background: #184366;
        }

        #message {
            position: relative;
            display: block;
            margin-top: 1em;
            font-size: 1.5em;
            color: #BFCEDD;
            text-shadow: 1px 1px 5px #324659;
            text-align: center;
        }

        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #00000047;
            -webkit-backdrop-filter: blur(1px);
            backdrop-filter: blur(10px);
            z-index: 2;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 50;
        }

        .popup.show {
            display: flex;
        }

        .popup-content {
            background: #10373799;
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(12px);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
        }

        .popup-content p {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #FFFFFF;
            text-shadow: 1px 1px 5px #000000B3;
        }

        #new-game, #how-to-play-ok, #name-submit {
            padding: 10px 20px;
            font-size: 1.2em;
            background: #FFFFFF54;
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(3px);
            box-shadow: 1px 7px 6px #FFFFFF73;
            color: #ffffff;
            border: 2px solid;
            border-color: #FFF;
            border-radius: 8px;
            cursor: pointer;
        }

        #new-game:hover, #how-to-play-ok:hover, #name-submit:hover {
            background: #FFFFFF7A;
        }
        
        .gradient-wrap {
            overflow: hidden;
            width: 100%;
            height:100vh;
            z-index: -1;            
            position: fixed;
        }
            
        .meshgradient>.color {
            width: 100%;
            height:100%;
            position: fixed;
            display: flex;
            align-items: center;
            transform: scale(3) rotate(0deg);
            top:0;
            bottom:0;
            left:0;
            right:0;
            margin: auto;
            background-repeat: no-repeat;
            mix-blend-mode: overlay;
        }

        .c1 {
            background: radial-gradient(#CCA10B 25%, transparent 50%);
            background-size: 60% 80%;
            background-position: 0 10%;
            animation: c1 8s infinite linear;
        }
            
        .c2 {
            background: radial-gradient(#27136D 25%, transparent 50%);
            background-size: 70% 80%;
            background-position: 0 100%;
            animation: c2 10s infinite linear;
        }
        
        .c3 {
            background: radial-gradient(#701F79 25%, transparent 50%);
            background-size: 80% 70%;
            background-position: 50% 0;
            animation: c3 5s infinite linear;
        }
            
        .c4 {
            background: radial-gradient(#134D46 25%, transparent 50%);
            background-size: 80% 80%;
            background-position: 50% 100%;
            animation: c4 6s infinite linear;
        }

        @keyframes c1 { 
            50%{ 
                background-size: 80% 80%;
                background-position: 50% 100%;
                transform: scale(3) rotate(-75deg);
            }
        }
        
        @keyframes c2 {
            50%{ 
                background-size: 80% 80%;
                background-position: 50% 0;
                transform: scale(3) rotate(90deg);
            }
        }
        @keyframes c3 {
            50%{ 
               background-size: 70% 80%;
               background-position: 0 100%;
               transform: scale(3) rotate(18deg);
            }
        }
        
        @keyframes c4 {
            50%{ 
              background-position: 0 0;
              animation: c1 10s infinite;
              transform: scale(3) rotate(-36deg);
            }
        }
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.4);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            padding: 0.1rem;
            height: 1.5rem;
            color: white;
            font-size: 0.6em;
            text-align: center;
            border-top: 1px solid #FFFFFF33;
            z-index: 10;
        }

        /* New styles for How to Play button and popup */
        #how-to-play-btn {
            position: fixed;
            top: 5rem;
            right: 1rem;
            padding: 8px 16px;
            font-size: 1em;
            background: #155C4E3B;
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(3px);
            box-shadow: 1px 4px 6px #FFFFFF73;
            color: #ffffff;
            border: 2px solid;
            border-color: #FFF;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            z-index: 55;
        }

        #how-to-play-btn:hover {
            background: #184366;
        }

        #how-to-play-popup {
            position: fixed;
            justify-content: center;
            align-items: center;
            flex-direction: column;            
            padding-bottom: 2rem; /* Margin from bottom */
        }

        #how-to-play-popup .popup-content {
            max-width: 70%;
        }

        #how-to-play-popup p {
            font-size: 1.2em;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        /* New styles for Change Players Name popup */
        #name-popup .popup-content {
            max-width: 70%;
        }

        #name-popup input {
            margin: 10px 0;
            padding: 8px;
            font-size: 1em;
            background: #FFFFFF1A;
            color: #FFFFFF;
            border: 1px solid #FFFFFF33;
            border-radius: 5px;
            width: 100%;
            max-width: 200px;
        }

        #name-popup input::placeholder {
            color: #BFCEDD;
        }
    </style>
</head>
<body>
    <div class="gradient-wrap meshgradient">
        <div class="color c1"></div>
        <div class="color c2"></div>
        <div class="color c3"></div>
        <div class="color c4"></div>
    </div>
    <header>
        <h1 class="text-2xl text-white py-2">Tick-Tac-Toe Bolt</h1>
    </header>

    <!-- Floating How to Play button -->
    <button id="how-to-play-btn">How to Play?</button>
    <div class="wrapper">
        <div class="container" id="board">
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
            <button class="button-option"></button>
        </div>
        <button id="restart">RESTART</button>
        <div id="message">Player X's Turn</div>
    </div>
    <div class="popup" id="popup">
        <div class="popup-content">
            <p id="popup-message"></p>
            <button id="new-game">New Game</button>
        </div>
    </div>
    <!-- How to Play popup -->
    <div class="popup" id="how-to-play-popup">
        <div class="popup-content">
            <p>Rules to play Tic-Tac-Toe Bolt:</p>
            <p>
                1. This is a two-player game. One player is <strong>X</strong> (red), and the other is <strong>O</strong> (yellow).<br>
                2. Take turns clicking an empty square to place your symbol.<br>
                3. Each player can have only 3 symbols on the board at a time. Placing a new symbol removes your oldest one.<br>
                4. To win, get 3 of your symbols in a row, column, or diagonal.<br>
                5. Click "Restart" to start a new game or "New Game" after a win.
            </p>
            <button id="how-to-play-ok">Okay</button>
        </div>
    </div>
    <!-- Change Players Name popup -->
    <div class="popup show" id="name-popup">
        <div class="popup-content">
            <p>Enter Player Names</p>
            <input type="text" id="player-x-name" placeholder="Player X Name" maxlength="15">
            <input type="text" id="player-o-name" placeholder="Player O Name" maxlength="15">
            <button id="name-submit">Start Game</button>
        </div>
    </div>
    <footer>
        <h2>Developed by GTMDBR</h2>
    </footer>
    <script>
        const buttons = document.querySelectorAll('.button-option');
        const restartBtn = document.getElementById('restart');
        const message = document.getElementById('message');
        const popup = document.getElementById('popup');
        const popupMessage = document.getElementById('popup-message');
        const newGameBtn = document.getElementById('new-game');
        const howToPlayBtn = document.getElementById('how-to-play-btn');
        const howToPlayPopup = document.getElementById('how-to-play-popup');
        const howToPlayOk = document.getElementById('how-to-play-ok');
        const namePopup = document.getElementById('name-popup');
        const playerXNameInput = document.getElementById('player-x-name');
        const playerONameInput = document.getElementById('player-o-name');
        const nameSubmitBtn = document.getElementById('name-submit');
        let currentPlayer = 'X';
        let moves = { X: [], O: [] }; // Track moves for each player
        let gameActive = true;
        let playerXName = 'Player X';
        let playerOName = 'Player O';

        const winningCombinations = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
            [0, 4, 8], [2, 4, 6] // Diagonals
        ];

        buttons.forEach((button, index) => {
            button.addEventListener('click', () => handleMove(index));
        });

        restartBtn.addEventListener('click', resetGame);
        newGameBtn.addEventListener('click', () => {
            popup.classList.remove('show');
            resetGame();
        });

        howToPlayBtn.addEventListener('click', () => {
            howToPlayPopup.classList.add('show');
        });

        howToPlayOk.addEventListener('click', () => {
            howToPlayPopup.classList.remove('show');
        });

        nameSubmitBtn.addEventListener('click', () => {
            const xName = playerXNameInput.value.trim();
            const oName = playerONameInput.value.trim();
            playerXName = xName || 'Player X';
            playerOName = oName || 'Player O';
            namePopup.classList.remove('show');
            message.textContent = `${playerXName}'s Turn`;
        });

        function handleMove(index) {
            if (!gameActive || buttons[index].textContent) return;

            buttons[index].textContent = currentPlayer;
            buttons[index].classList.add(currentPlayer.toLowerCase());
            buttons[index].disabled = true;

            moves[currentPlayer].push(index);

            // Remove oldest move if player has more than 3
            if (moves[currentPlayer].length > 3) {
                const oldIndex = moves[currentPlayer].shift();
                buttons[oldIndex].textContent = '';
                buttons[oldIndex].classList.remove(currentPlayer.toLowerCase());
                buttons[oldIndex].disabled = false;
            }

            if (checkWin()) {
                const winner = currentPlayer === 'X' ? playerXName : playerOName;
                showPopup(`${winner} Wins!`);
                gameActive = false;
                return;
            }

            // Check for draw (unlikely in Infinite mode, but possible if board stabilizes)
            if ([...buttons].every(btn => btn.disabled)) {
                showPopup("It's a Draw!");
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            const currentPlayerName = currentPlayer === 'X' ? playerXName : playerOName;
            message.textContent = `${currentPlayerName}'s Turn`;
        }

        function checkWin() {
            return winningCombinations.some(combination => {
                return combination.every(index => {
                    return buttons[index].textContent === currentPlayer;
                });
            });
        }

        function showPopup(text) {
            popupMessage.textContent = text;
            popup.classList.add('show');
        }

        function resetGame() {
            buttons.forEach(button => {
                button.textContent = '';
                button.classList.remove('x', 'o');
                button.disabled = false;
            });
            currentPlayer = 'X';
            moves = { X: [], O: [] };
            gameActive = true;
            message.textContent = `${playerXName}'s Turn`;
        }
    </script>
</body>
</html>